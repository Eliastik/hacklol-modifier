$(document).ready(function(){function k(a,c,d){if(b){if(c){var e=a.originalEvent;a.preventDefault(),"undefined"!=typeof d&&(f=e.targetTouches[0].pageX-d.offsetLeft,g=e.targetTouches[0].pageY-d.offsetTop)}else"undefined"!=typeof d&&(f=a.pageX-d.offsetLeft,g=a.pageY-d.offsetTop);n()}}function l(){b=!1,c=!1}function m(a,c){if(b=!0,c){var d=a.originalEvent;a.preventDefault(),"undefined"!=typeof obj&&(f=d.pageX-obj.offsetLeft,g=d.pageY-obj.offsetTop)}else"undefined"!=typeof obj&&(f=a.pageX-this.offsetLeft,g=a.pageY-this.offsetTop)}function n(){c?(j.lineTo(f,g),j.strokeStyle=a,j.lineWidth=d,j.stroke()):(j.beginPath(),j.moveTo(f,g),c=!0)}function o(){j.clearRect(0,0,e.width(),e.height())}if(window.HTMLCanvasElement){var f,g,a="#000",b=!1,c=!1,d=5,e=$("#canvas"),j=e[0].getContext("2d");j.lineJoin="round",j.lineCap="round",e.mousedown(function(a){b=!0,f=a.pageX-this.offsetLeft,g=a.pageY-this.offsetTop}),$(this).mouseup(function(){b=!1,c=!1}),e.bind("touchstart",function(a){m(a,!0)}),$(this).bind("touchend",function(){l()}),e.bind("touchmove",function(a){k(a,!0,this)}),e.mousemove(function(a){b&&(f=a.pageX-this.offsetLeft-10,g=a.pageY-this.offsetTop-10,n())}),$("#couleurs a").each(function(){$(this).css("background",$(this).attr("data-couleur")),$(this).click(function(){return a=$(this).attr("data-couleur"),$("#couleurs a").removeAttr("class",""),$(this).attr("class","actif"),!1})}),$("#choixCouleur").colpick({layout:"hex",submit:0,color:"ffffff",colorScheme:"dark",onChange:function(b,c,d,e,f){$("#choixCouleur").css("background-color","#"+c),a="#"+c},onShow:function(b,c,d,e,f){a=$("#choixCouleur").css("background-color")}}),$("#largeurs_pinceau input").change(function(){isNaN($(this).val())||(d=$(this).val(),$("#output").html($(this).val()+" pixels"))}),$("#resetPaint").click(function(){o(),$("#largeur_pinceau").val(5).trigger("change"),d=5,$("#output").html("5 pixels"),a="#000000",$(".actif").removeClass("actif"),$("#color_paint_default").addClass("actif"),$("#choixCouleur").css("background-color","#ffffff")}),$("#savePaint").click(function(){var a=document.getElementById("canvas");window.open(a.toDataURL("image/png"))}),$("#colorPaint").click(function(){$("#bulleCouleur").stop().slideToggle("slow"),$("#bulleBrush").hide()}),$("#brushPaint").click(function(){$("#bulleBrush").stop().slideToggle("slow"),$("#bulleCouleur").hide()})}else $("#paint-not-compatible").show(),$("#click-paint").hide(),$("#paint-not-compatible").click(function(){"en"==hacklol.lang?alert("Sorry, this tool isn't compatible with your web browser.\nUpdate your browser, and try again."):alert("Désolé, cet outil n'est pas compatible avec votre navigateur.\nMettez à jour votre navigateur, puis réessayez.")})});
